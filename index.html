<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flower Surprise</title>
<style>
  :root{
    --bg: #071024;
    --overlay: rgba(0,0,0,0.36);
    --btn-bg: #ffffff;
    --btn-color: #071024;
    --accent: #ffd966;
    --success: #36d399;
    --danger: #ff6b6b;
    --toast-bg: rgba(0,0,0,0.85);
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#fff;-webkit-font-smoothing:antialiased}
  .app{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;}

  .slides {
    width:100%;
    max-width:1000px;
    height:85vh;
    border-radius:12px;
    overflow:hidden;
    position:relative;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));
    box-shadow: 0 12px 40px rgba(1,6,20,0.6);
  }

  .slides-inner { display:flex; height:100%; transition: transform 420ms cubic-bezier(.22,.9,.3,1); }

  .slide { min-width:100%; height:100%; position:relative; display:flex; align-items:center; justify-content:center; padding:18px; }

  .card { width:100%; height:100%; position:relative; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; gap:12px; }

  .image-area {
    width:100%;
    max-width:980px;
    height:70%;
    border-radius:10px;
    overflow:hidden;
    position:relative;
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
    display:block;
  }

  .overlay { position:absolute; inset:0; background:var(--overlay); pointer-events:none; }

  .msg {
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    z-index:3;
    font-weight:800;
    font-size: clamp(26px, 5vw, 56px);
    text-align:center;
    color:#fff;
    text-shadow: 0 6px 18px rgba(0,0,0,0.6);
    padding: 6px 12px;
    line-height:1;
  }

  .below {
    margin-top: 12px;
    display:flex;
    align-items:center;
    justify-content:center;
    width:100%;
  }

  .btn {
    background: var(--btn-bg);
    color: var(--btn-color);
    padding: 12px 18px;
    border-radius:10px;
    border:0;
    font-weight:700;
    cursor:pointer;
    box-shadow:0 10px 28px rgba(2,6,23,0.35);
  }

  .btn.secondary {
    background: transparent;
    color: #fff;
    border:1px solid rgba(255,255,255,0.12);
  }

  .choices-wrap {
    width:100%;
    max-width:980px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:18px;
    padding:6px 12px;
  }

  .choice-grid { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; width:100%; }

  .opt {
    width:160px;
    border-radius:10px;
    overflow:hidden;
    background: rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.04);
    cursor:pointer;
    transition: transform 160ms ease, box-shadow 160ms ease;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  .opt:hover { transform:translateY(-8px); box-shadow:0 18px 40px rgba(2,6,23,0.5); }
  .opt img{ width:100%; height:120px; object-fit:cover; display:block; }
  .opt .label { padding:10px; font-weight:800; color:#fff; background:transparent; width:100%; text-align:center; }

  .result {
    font-weight:900;
    font-size:20px;
    padding:12px 18px;
    border-radius:10px;
    display:inline-block;
    margin-top:10px;
    opacity:0;
    transform:translateY(8px);
    transition:opacity 260ms ease, transform 260ms ease, box-shadow 260ms ease;
  }
  .result.show { opacity:1; transform:translateY(0); }

  .result.good { background: linear-gradient(90deg, rgba(54,211,153,0.12), rgba(54,211,153,0.06)); color: var(--success); box-shadow:0 10px 30px rgba(54,211,153,0.06); border:1px solid rgba(54,211,153,0.12); }
  .result.hehe { background: linear-gradient(90deg, rgba(255,107,107,0.10), rgba(255,107,107,0.04)); color: var(--danger); box-shadow:0 10px 30px rgba(255,107,107,0.06); border:1px solid rgba(255,107,107,0.08); }

  .final-msg {
    position:relative;
    z-index:4;
    font-weight:900;
    font-size: clamp(26px, 5vw, 56px);
    color:#fff;
    text-shadow:0 8px 28px rgba(0,0,0,0.6);
    text-align:center;
    padding:8px 12px;
  }

  .final-controls { display:flex; gap:12px; margin-top:12px; }

  .toast {
    position:fixed;
    left:50%;
    transform:translateX(-50%);
    bottom:22px;
    background: var(--toast-bg);
    color: #fff;
    padding:10px 14px;
    border-radius:10px;
    box-shadow:0 10px 30px rgba(0,0,0,0.5);
    opacity:0;
    pointer-events:none;
    transition:opacity 220ms ease, transform 220ms ease;
    z-index:9999;
  }
  .toast.show { opacity:1; transform:translateX(-50%) translateY(-6px); pointer-events:auto; }

  .dots{ position:absolute; bottom:12px; left:50%; transform:translateX(-50%); display:flex; gap:8px; z-index:6; }
  .dot{ width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,0.14); }
  .dot.active{ background:rgba(255,255,255,0.95); width:20px; border-radius:8px; }

  @media (max-width:700px) {
    .image-area { height:64%; }
    .opt { width:120px; }
    .opt img { height:90px; }
  }
  @media (max-width:420px) {
    .msg { font-size: clamp(20px, 8vw, 34px); padding:6px 10px; }
    .btn { padding:10px 14px; }
  }

  /* Background shortcuts (will be used for final slide) */
  .bg-bou1 { background-image: url('bou.png'); background-size:cover; background-position:center; }
  .bg-bou2 { background-image: url('bou2.png'); background-size:cover; background-position:center; }
  .bg-bou3 { background-image: url('bou3.png'); background-size:cover; background-position:center; }
</style>
</head>
<body>
<div class="app" role="application" aria-label="Flower surprise application">
  <div class="slides" aria-roledescription="carousel" aria-label="Slides">
    <div id="slidesInner" class="slides-inner">

      <!-- Slide 1: Landing -->
      <section class="slide" aria-label="Landing slide">
        <div class="card">
          <div class="image-area" style="background: linear-gradient(135deg,#1b2430,#09202a);"></div>
          <div class="msg" style="position:relative; top:-62%;">flowers ðŸ‘€</div>
          <div class="below">
            <button id="btnExplore" class="btn">Explore flowers</button>
          </div>
        </div>
      </section>

      <!-- Slide 2: Original bouquet -->
      <section class="slide" aria-label="Bouquet slide">
        <div class="card">
          <div class="image-area" style="background-image:url('bou.png');"></div>
          <div class="msg">ye chale ga?</div>
          <div class="below">
            <button id="btnHey" class="btn secondary">hey click here</button>
          </div>
        </div>
      </section>

      <!-- Slide 3: bou2 -->
      <section class="slide" aria-label="Bou2 slide">
        <div class="card">
          <div class="image-area" style="background-image:url('bou2.png');"></div>
          <div class="msg">What about it?</div>
          <div class="below">
            <button id="btnChalo" class="btn">chalo next</button>
          </div>
        </div>
      </section>

      <!-- Slide 4: bou3 -->
      <section class="slide" aria-label="Bou3 slide">
        <div class="card">
          <div class="image-area" style="background-image:url('bou3.png');"></div>
          <div class="msg">perfect</div>
          <div class="below">
            <button id="btnWhich" class="btn">which flower you liked</button>
          </div>
        </div>
      </section>

      <!-- Slide 5: Choices -->
      <section class="slide" aria-label="Choices slide">
        <div class="card" style="justify-content:flex-start; padding-top:22px;">
          <div class="choices-wrap" role="region" aria-label="Choose flower">
            <div style="font-weight:900; font-size:28px; text-align:center;">Pick one</div>

            <div class="choice-grid" role="list" aria-label="options">
              <div class="opt" role="listitem" tabindex="0" data-choice="1" aria-label="Option 1">
                <img src="bou.png" alt="Option 1">
                <div class="label">Option 1</div>
              </div>

              <div class="opt" role="listitem" tabindex="0" data-choice="2" aria-label="Option 2">
                <img src="bou2.png" alt="Option 2">
                <div class="label">Option 2</div>
              </div>

              <div class="opt" role="listitem" tabindex="0" data-choice="3" aria-label="Option 3">
                <img src="bou3.png" alt="Option 3">
                <div class="label">Option 3</div>
              </div>
            </div>

            <div id="resultMsg" class="result" role="status" aria-live="polite"></div>

            <div style="margin-top:12px; text-align:center;">
              <button id="btnBack" class="btn secondary">Back</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Slide 6: Final (shows chosen image as background + message + Restart + Send this) -->
      <section class="slide" aria-label="Final slide">
        <div class="card" style="justify-content:flex-start; padding-top:24px;">
          <div id="finalImage" class="image-area" style="background-color:#000;"></div>
          <div class="final-msg" id="finalMsg"> </div>
          <div class="final-controls">
            <button id="btnRestart" class="btn secondary">Restart</button>
            <button id="btnSend" class="btn">Send this</button>
          </div>
        </div>
      </section>

    </div> <!-- slides-inner -->

    <div class="dots" aria-hidden="true">
      <div class="dot active"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>

  </div> <!-- slides -->
</div>

<div id="toast" class="toast" role="status" aria-live="polite"> </div>

<script>
(function(){
  const slidesInner = document.getElementById('slidesInner');
  const dots = Array.from(document.querySelectorAll('.dot'));
  const total = document.querySelectorAll('.slide').length;
  let idx = 0;
  let chosen = null; // '1'|'2'|'3'
  let chosenImageName = '';

  function goTo(i){
    if(i < 0) i = 0;
    if(i >= total) i = total - 1;
    idx = i;
    slidesInner.style.transform = 'translateX(' + (-100 * idx) + '%)';
    updateDots();
    // reset choice UI when leaving choices
    if(idx !== 4) clearResult();
  }
  function updateDots(){
    dots.forEach((d,ii)=> d.classList.toggle('active', ii === idx));
  }

  // nav buttons
  document.getElementById('btnExplore').addEventListener('click', ()=> goTo(1));
  document.getElementById('btnHey').addEventListener('click', ()=> goTo(2));
  document.getElementById('btnChalo').addEventListener('click', ()=> goTo(3));
  document.getElementById('btnWhich').addEventListener('click', ()=> goTo(4));
  document.getElementById('btnBack').addEventListener('click', ()=> goTo(3));
  document.getElementById('btnRestart').addEventListener('click', ()=> {
    // reset and go to first slide
    chosen = null; chosenImageName = '';
    document.getElementById('finalMsg').textContent = '';
    document.getElementById('finalImage').className = 'image-area';
    goTo(0);
  });

  const opts = Array.from(document.querySelectorAll('.opt'));
  const result = document.getElementById('resultMsg');

  function clearResult(){
    result.className = 'result';
    result.textContent = '';
    // reset option shadows
    opts.forEach(o => { o.style.boxShadow = ''; o.style.opacity = '1'; });
  }

  function showResultFor(choice){
    // show inline result on choices slide as before
    if(choice === '1' || choice === '2'){
      result.textContent = 'Woo Great choice';
      result.className = 'result show good';
    } else if(choice === '3'){
      result.textContent = 'HEHE';
      result.className = 'result show hehe';
    }
  }

  // when user chooses option on slide 5 -> go to final slide 6 with proper background + final message
  function proceedToFinal(choice){
    chosen = choice;
    if(choice === '1') chosenImageName = 'bou.png';
    if(choice === '2') chosenImageName = 'bou2.png';
    if(choice === '3') chosenImageName = 'bou3.png';

    // set final background
    const finalImage = document.getElementById('finalImage');
    finalImage.style.backgroundImage = "url('" + chosenImageName + "')";
    finalImage.style.backgroundSize = 'cover';
    finalImage.style.backgroundPosition = 'center';

    // set final message per your request (option1 "noice noice", option2 Woo..., option3 HEHE)
    const finalMsg = document.getElementById('finalMsg');
    if(choice === '1') finalMsg.textContent = 'noice noice';
    if(choice === '2') finalMsg.textContent = 'Woo Great choice';
    if(choice === '3') finalMsg.textContent = 'HEHE';

    // go to final slide (index 5)
    goTo(5);
  }

  opts.forEach(opt => {
    const choice = opt.getAttribute('data-choice');
    function select(){
      // visual pick
      opts.forEach(o => o.style.opacity = '0.95');
      opt.style.boxShadow = '0 18px 40px rgba(3,10,30,0.6)';
      // show result on choices slide
      showResultFor(choice);
      // small delay then proceed to final slide (makes UX smoother)
      setTimeout(()=> proceedToFinal(choice), 450);
    }
    opt.addEventListener('click', select);
    opt.addEventListener('keypress', (e)=> { if(e.key==='Enter' || e.key===' ') select(); });
  });

  // Send this button (Option A: copy link)
  document.getElementById('btnSend').addEventListener('click', async ()=>{
    if(!chosenImageName){
      showToast('No image selected');
      return;
    }
    // build absolute URL to image based on current location.
    // this handles GitHub Pages and similar hosting.
    const base = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '/');
    const imageURL = base + chosenImageName;

    // Try navigator.clipboard then fallback
    try {
      if(navigator.clipboard && navigator.clipboard.writeText){
        await navigator.clipboard.writeText(imageURL);
      } else {
        // fallback for older browsers
        const ta = document.createElement('textarea');
        ta.value = imageURL;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        ta.remove();
      }
      showToast('Link copied! Now send it to someone ðŸ˜Š');
    } catch (e){
      // fallback: show the link so user can copy manually
      showToast('Could not copy automatically. Link: ' + imageURL);
    }
  });

  // Toast helper
  const toast = document.getElementById('toast');
  let toastTimer = null;
  function showToast(text, ms=3000){
    toast.textContent = text;
    toast.classList.add('show');
    if(toastTimer) clearTimeout(toastTimer);
    toastTimer = setTimeout(()=> { toast.classList.remove('show'); }, ms);
  }

  // keyboard navigation
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight') goTo(Math.min(idx+1, total-1));
    if(e.key === 'ArrowLeft') goTo(Math.max(idx-1, 0));
  });

  // prevent dragging images
  document.querySelectorAll('img').forEach(i => i.setAttribute('draggable','false'));

  // initial
  goTo(0);
})();
</script>
</body>
</html>
